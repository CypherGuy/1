<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Lecture 2 Demo</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
   <style>
      h3 {
         width: 3em;
         height: 3em;
         text-align: center;
         background-color: #ffdab9;
         border: 1px solid;
         padding: 1em;
         margin-right: 0.5em;
      }
   </style>
   <script type="text/javascript">
      window.addEventListener('load', () => {

         const getRandNum = (max = 100) =>
            Math.floor(Math.random() * max + 1)

         const createElement = (tag, content) => {
            const element = document.createElement(tag)
            element.textContent = content

            element.addEventListener('click', () => removeElement(content))
            return element
         }

         const addNumber = () => {
            // Step 1: Get all h3 elements and make an array of them
            allH3 = Array.from(document.querySelectorAll('h3'))

            if (allH3.length > 29) {
               return alert('Too many numbers!')
            }

            maxval = document.getElementById('maxValue').value

            const item = createElement('h3', getRandNum(maxval))
            container.appendChild(item)

         }

         const removeElement = (number) => {
            allH3 = Array.from(document.querySelectorAll('h3'))
            // Find number
            for (const h3 of allH3) {
               if (parseInt(h3.textContent) === number) {
                  const sumText = document.getElementById('liveSum')
                  container.removeChild(h3)
                  changeSum()
               }
            }
            return
         }

         const sortNums = (way = 0) => {
            // Step 1: Get all h3 elements and make an array of them
            allH3 = Array.from(document.querySelectorAll('h3'))

            // Step 2: Sort based on numbers

            if (way === 0) { // Ascending
               allH3Sorted = allH3.sort(function (a, b) {
                  return parseInt(a.textContent) - parseInt(b.textContent)
               });
            } else if (way === 1) { // Descending
               allH3Sorted = allH3.sort(function (a, b) {
                  return parseInt(b.textContent) - parseInt(a.textContent)
               });
            }

            // Step 3: Clear the container
            container.innerHTML = ''

            // Step 4: Re-add the sorted elements
            for (const h3 of allH3Sorted) {
               container.appendChild(h3)
            }
         };

         const clearNums = () => {
            container.innerHTML = ''
            const sumText = document.getElementById('liveSum')

            sumText.textContent = '0'

         };

         const changeSum = () => {
            let sum = 0
            // Step 1: Get all h3 elements and make an array of them
            allH3 = Array.from(document.querySelectorAll('h3'))
            const sumText = document.getElementById('liveSum')
            for (const h3 of allH3) {
               sum += parseInt(h3.textContent)
            }
            sumText.textContent = `Sum = ${sum}`
         }

         const highLow = () => {
            // Step 1: Get all h3 elements and make an array of them
            allH3 = Array.from(document.querySelectorAll('h3'))

            // Step 2: Sort based on numbers
            allH3Sorted = allH3.sort(function (a, b) {
               return parseInt(a.textContent) - parseInt(b.textContent)
            });

            // Step 3: Reset the background color
            for (const h3 of allH3Sorted) {
               h3.style.backgroundColor = '#ffdab9'
            }

            // Step 4: Find the min and max
            maxVal = allH3Sorted[allH3Sorted.length - 1]
            minVal = allH3Sorted[0]

            // Step 5: Change the background colour
            maxVal.style.backgroundColor = '#ADD8E6'
            minVal.style.backgroundColor = '#ADD8E6'
         }

         const container = document.querySelector('#container')
         const btAdd = document.querySelector('#btnAdd')
         btAdd.addEventListener('click', () => addNumber())
         btAdd.addEventListener('click', () => changeSum())
         const btnAscAdd = document.querySelector('#btnAscAdd')
         btnAscAdd.addEventListener('click', () => sortNums(0))
         const btnDscAdd = document.querySelector('#btnDscAdd')
         btnDscAdd.addEventListener('click', () => sortNums(1))
         const btCleardd = document.querySelector('#btnClearAdd')
         btnClearAdd.addEventListener('click', () => clearNums())
         const btHighLow = document.querySelector('#btnHighLow')
         btHighLow.addEventListener('click', () => highLow())
      })
   </script>
</head>

<body class="p-5 text-center">
   <h1>Random numbers</h1>
   <input type="number" id="maxValue" placeholder="Max Value" min="0" max="100" />
   <button id="btnAdd" class="btn btn-primary my-4">Add a number</button>
   <button id="btnAscAdd" class="btn btn-primary my-4">Sort Ascendingly</button>
   <button id="btnDscAdd" class="btn btn-primary my-4">Sort Descendingly</button>
   <button id="btnClearAdd" class="btn btn-primary my-4">Clear all</button>
   <button id="btnHighLow" class="btn btn-primary my-4">High Low</button>
   <div id="container" class="d-flex flex-wrap gap-3 justify-content-center"></div>
   <p id="liveSum">0</p>
</body>

</html>